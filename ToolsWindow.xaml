<Window x:Class="Trident.MITM.ToolsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TRIDENT — Outils" Height="540" Width="860"
        Background="{DynamicResource B_Bg0}">
    <!-- DynamicResource allows forward ref -->

    <Window.Resources>
        <!-- Styles only; brushes come from App.xaml -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource B_Fg}"/>
        </Style>
        <Style TargetType="Button">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="8,6"/>
        </Style>
        <Style TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource B_Bg1}"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="BorderBrush" Value="#262933"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- En-tête -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <Image Source="/Assets/TRIDENT.png" Height="64" Stretch="Uniform"/>
            <StackPanel Margin="10,0,0,0">
                <TextBlock Text="TRIDENT — Outils pro" FontSize="22" FontWeight="Bold"/>
                <TextBlock Text="Import/Export • Raccourcis • Overlay • Journal • Test vibration • Thèmes"
                           Foreground="{DynamicResource B_Sub}"/>
            </StackPanel>
        </DockPanel>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- Import / Export -->
            <Border Grid.Column="0" Margin="0,0,10,10">
                <StackPanel>
                    <TextBlock Text="Profils (Import / Export)" FontWeight="SemiBold"/>
                    <WrapPanel>
                        <Button Content="Importer..." Click="Import_Click"/>
                        <Button Content="Exporter..." Click="Export_Click"/>
                        <Button Content="Ouvrir dossier" Click="OpenFolder_Click"/>
                    </WrapPanel>
                    <TextBlock Text="Dernière action :" Foreground="{DynamicResource B_Sub}" Margin="0,6,0,0"/>
                    <TextBlock x:Name="TxtLastAction" Text="—"/>
                </StackPanel>
            </Border>

            <!-- Raccourcis globaux & Overlay -->
            <Border Grid.Column="1" Margin="0,0,10,10">
                <StackPanel>
                    <TextBlock Text="Raccourcis globaux" FontWeight="SemiBold"/>
                    <TextBlock Text="Ctrl+Alt+F1 : Démarrer/Stopper"/>
                    <TextBlock Text="Ctrl+Alt+← / → : Profil précédent / suivant"/>
                    <TextBlock Text="Ctrl+Alt+R : Toggle Rapid Fire"/>
                    <Separator/>
                    <CheckBox x:Name="ChkOverlay" Content="Activer overlay en jeu"
                              Checked="ChkOverlay_Checked" Unchecked="ChkOverlay_Checked"/>
                </StackPanel>
            </Border>

            <!-- Thème -->
            <Border Grid.Column="2" Margin="0,0,10,10">
                <StackPanel>
                    <TextBlock Text="Thème" FontWeight="SemiBold"/>
                    <WrapPanel>
                        <RadioButton x:Name="RDark" Content="Sombre" IsChecked="True" Checked="Theme_Checked"/>
                        <RadioButton x:Name="RLight" Content="Clair" Margin="12,0,0,0" Checked="Theme_Checked"/>
                    </WrapPanel>
                    <Image Source="/Assets/TRIDENT.png" Height="96" Margin="0,6,0,0"/>
                </StackPanel>
            </Border>

            <!-- Journal -->
            <Border Grid.ColumnSpan="2" Grid.Row="1" Margin="0,10,10,0">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" ShadowDepth="0" BlurRadius="10" Opacity="0.3"/>
                </Border.Effect>
                <StackPanel>
                    <TextBlock Text="Journal (événements)" FontWeight="SemiBold"/>
                    <ListBox x:Name="LogList" Height="220"/>
                </StackPanel>
            </Border>

            <!-- Test vibration -->
            <Border Grid.Column="2" Grid.Row="1" Margin="0,10,0,0">
                <StackPanel>
                    <TextBlock Text="Testeur de vibrations" FontWeight="SemiBold"/>
                    <UniformGrid Columns="2" Rows="3" Margin="0,6,0,6">
                        <TextBlock Text="Small (0-255)"/>
                        <Slider x:Name="Sml" Minimum="0" Maximum="255" Value="120"/>
                        <TextBlock Text="Large (0-255)"/>
                        <Slider x:Name="Lrg" Minimum="0" Maximum="255" Value="160"/>
                        <TextBlock Text="Durée (ms)"/>
                        <Slider x:Name="Dur" Minimum="50" Maximum="2000" Value="300"/>
                    </UniformGrid>
                    <WrapPanel>
                        <Button Content="Pulse" Click="Pulse_Click"/>
                        <Button Content="Ramp 1s" Click="Ramp_Click"/>
                        <Button Content="Stop" Click="Stop_Click"/>
                    </WrapPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>
